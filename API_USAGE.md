# –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é API

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ API

–í—Å–µ API endpoints –Ω–∞—Ö–æ–¥—è—Ç—Å—è –≤ –ø–∞–ø–∫–µ `/api/`:

- `config.php` - –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –ë–î
- `categories.php` - –†–∞–±–æ—Ç–∞ —Å –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º–∏
- `products.php` - –†–∞–±–æ—Ç–∞ —Å —Ç–æ–≤–∞—Ä–∞–º–∏
- `orders.php` - –†–∞–±–æ—Ç–∞ —Å –∑–∞–∫–∞–∑–∞–º–∏
- `users.php` - –†–∞–±–æ—Ç–∞ —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏
- `import_products.php` - –ò–º–ø–æ—Ä—Ç —Ç–æ–≤–∞—Ä–æ–≤ –≤ –ë–î

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –ò–º–ø–æ—Ä—Ç —Ç–æ–≤–∞—Ä–æ–≤

–ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–∫—Ä–∏–ø—Ç –∏–º–ø–æ—Ä—Ç–∞ –æ–¥–∏–Ω —Ä–∞–∑ –¥–ª—è –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è –±–∞–∑—ã —Ç–æ–≤–∞—Ä–∞–º–∏:

```
http://localhost/pc_salon/api/import_products.php
```

–ò–ª–∏ —á–µ—Ä–µ–∑ –∫–æ–º–∞–Ω–¥–Ω—É—é —Å—Ç—Ä–æ–∫—É:
```bash
php api/import_products.php
```

### 2. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ API

–û—Ç–∫—Ä–æ–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ Postman/curl:

**–ü–æ–ª—É—á–∏—Ç—å –∫–∞—Ç–µ–≥–æ—Ä–∏–∏:**
```
GET http://localhost/pc_salon/api/categories.php
```

**–ü–æ–ª—É—á–∏—Ç—å —Ç–æ–≤–∞—Ä—ã –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ 4K:**
```
GET http://localhost/pc_salon/api/products.php?category_id=4k
```

**–ü–æ–ª—É—á–∏—Ç—å —Ç–æ–≤–∞—Ä –ø–æ ID:**
```
GET http://localhost/pc_salon/api/products.php?id=1
```

## üìã API Endpoints

### –ö–∞—Ç–µ–≥–æ—Ä–∏–∏

**GET /api/categories.php**
- –ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –∫–∞—Ç–µ–≥–æ—Ä–∏–π
- –û—Ç–≤–µ—Ç: `{"success": true, "data": [...]}`

### –¢–æ–≤–∞—Ä—ã

**GET /api/products.php**
- –ë–µ–∑ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤: –≤—Å–µ —Ç–æ–≤–∞—Ä—ã
- `?category_id=4k` - —Ç–æ–≤–∞—Ä—ã –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
- `?id=1` - –æ–¥–∏–Ω —Ç–æ–≤–∞—Ä
- –û—Ç–≤–µ—Ç: `{"success": true, "data": {...}}`

### –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏

**GET /api/users.php?telegram_id=123456789**
- –ü–æ–ª—É—á–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–æ Telegram ID
- –û—Ç–≤–µ—Ç: `{"success": true, "data": {...}}`

**POST /api/users.php**
- –°–æ–∑–¥–∞—Ç—å/–æ–±–Ω–æ–≤–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- Body: `{"telegram_id": 123456789, "first_name": "–ò–≤–∞–Ω", ...}`
- –û—Ç–≤–µ—Ç: `{"success": true, "data": {...}}`

### –ó–∞–∫–∞–∑—ã

**POST /api/orders.php**
- –°–æ–∑–¥–∞—Ç—å –∑–∞–∫–∞–∑
- Body:
```json
{
  "user_id": 1,
  "delivery_type": "delivery",
  "full_name": "–ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤",
  "phone": "+79991234567",
  "address": "–ê–¥—Ä–µ—Å –¥–æ—Å—Ç–∞–≤–∫–∏",
  "comment": "–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π",
  "total_amount": 349990,
  "payment_method": "cash",
  "items": [
    {
      "product_id": 1,
      "item_type": "product",
      "item_name": "AURUM 4K Pro",
      "item_specs": "i9-13900K | RTX4090",
      "quantity": 1,
      "unit_price": 349990,
      "total_price": 349990
    }
  ]
}
```

**GET /api/orders.php?user_id=1**
- –ü–æ–ª—É—á–∏—Ç—å –∑–∞–∫–∞–∑—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

**GET /api/orders.php?id=1**
- –ü–æ–ª—É—á–∏—Ç—å –æ–¥–∏–Ω –∑–∞–∫–∞–∑ —Å —Ç–æ–≤–∞—Ä–∞–º–∏

## üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞

### –ò–∑–º–µ–Ω–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –ë–î

–û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ —Ñ–∞–π–ª `api/config.php`:

```php
define('DB_HOST', 'localhost');
define('DB_NAME', 'pc_salon');
define('DB_USER', 'root');
define('DB_PASS', ''); // –í–∞—à –ø–∞—Ä–æ–ª—å MySQL
```

## üìù –§–æ—Ä–º–∞—Ç –æ—Ç–≤–µ—Ç–æ–≤

–í—Å–µ –æ—Ç–≤–µ—Ç—ã –≤ —Ñ–æ—Ä–º–∞—Ç–µ JSON:

**–£—Å–ø–µ—à–Ω—ã–π –æ—Ç–≤–µ—Ç:**
```json
{
  "success": true,
  "data": {...}
}
```

**–û—à–∏–±–∫–∞:**
```json
{
  "error": "Error message"
}
```

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –° –ø–æ–º–æ—â—å—é curl:

```bash
# –ü–æ–ª—É—á–∏—Ç—å –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
curl http://localhost/pc_salon/api/categories.php

# –ü–æ–ª—É—á–∏—Ç—å —Ç–æ–≤–∞—Ä—ã
curl http://localhost/pc_salon/api/products.php?category_id=4k

# –°–æ–∑–¥–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
curl -X POST http://localhost/pc_salon/api/users.php \
  -H "Content-Type: application/json" \
  -d '{"telegram_id": 123456789, "first_name": "–ò–≤–∞–Ω"}'
```

## ‚ö†Ô∏è –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. ‚úÖ –ò–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å —Ç–æ–≤–∞—Ä—ã (`import_products.php`)
2. ‚è≥ –°–æ–∑–¥–∞—Ç—å JavaScript –º–æ–¥—É–ª—å –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å API
3. ‚è≥ –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å API –≤ `index.html`
4. ‚è≥ –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∑–∞–∫–∞–∑–æ–≤
5. ‚è≥ –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é –∫–æ—Ä–∑–∏–Ω—ã –∏ –∏–∑–±—Ä–∞–Ω–Ω–æ–≥–æ

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

–í –ø—Ä–æ–¥–∞–∫—à–µ–Ω–µ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è:
- –î–æ–±–∞–≤–∏—Ç—å –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—é (—Ç–æ–∫–µ–Ω—ã, —Å–µ—Å—Å–∏–∏)
- –í–∞–ª–∏–¥–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ –≤—Ö–æ–¥—è—â–∏–µ –¥–∞–Ω–Ω—ã–µ
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å prepared statements (—É–∂–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è)
- –ù–∞—Å—Ç—Ä–æ–∏—Ç—å CORS –ø—Ä–∞–≤–∏–ª—å–Ω–æ
- –î–æ–±–∞–≤–∏—Ç—å rate limiting

